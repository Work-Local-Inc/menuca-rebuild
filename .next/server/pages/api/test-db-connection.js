"use strict";(()=>{var e={};e.id=1748,e.ids=[1748],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},1287:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3912:(e,s,r)=>{r.r(s),r.d(s,{config:()=>o,default:()=>c,routeModule:()=>d});var t={};r.r(t),r.d(t,{default:()=>handler});var a=r(1802),i=r(7153),n=r(6249),u=r(2885);async function handler(e,s){let r=process.env.NEXT_PUBLIC_SUPABASE_URL,t=process.env.SUPABASE_SERVICE_ROLE_KEY,a=(0,u.createClient)(r,t);try{let{data:e,error:i}=await a.from("restaurants").select("id, name").limit(1);s.status(200).json({success:!0,url:r,hasServiceKey:!!t,keyPrefix:t?.substring(0,20)+"...",testQuery:{success:!i,data:e,error:i}})}catch(e){s.status(500).json({success:!1,url:r,hasServiceKey:!!t,error:e.message})}}let c=(0,n.l)(t,"default"),o=(0,n.l)(t,"config"),d=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/test-db-connection",pathname:"/api/test-db-connection",bundlePath:"",filename:""},userland:t})}};var s=require("../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[4222],()=>__webpack_exec__(3912));module.exports=r})();