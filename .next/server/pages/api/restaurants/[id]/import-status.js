"use strict";(()=>{var e={};e.id=7532,e.ids=[7532],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},1287:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9921:(e,t,s)=>{s.r(t),s.d(t,{config:()=>d,default:()=>u,routeModule:()=>c});var a={};s.r(a),s.d(a,{default:()=>handler});var r=s(1802),i=s(7153),o=s(6249),n=s(341);async function handler(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let{id:s}=e.query;if(!s||"string"!=typeof s)return t.status(400).json({error:"Restaurant ID is required"});let{data:a,error:r}=await n.p.from("menu_imports").select("*").eq("restaurant_id",s).order("started_at",{ascending:!1}).limit(1).single();if(r||!a)return t.status(200).json({success:!0,status:"unknown",totals:{categories:0,items:0},processed:{categories:0,items:0},items_failed:0});return t.status(200).json({success:!0,status:a.status||"unknown",totals:{categories:a.total_categories||0,items:a.total_items||0},processed:{categories:a.processed_categories||0,items:a.processed_items||0},items_failed:a.items_failed||0,started_at:a.started_at,updated_at:a.updated_at,completed_at:a.completed_at,menu_id:a.menu_id})}catch(e){return t.status(200).json({success:!0,status:"unknown",totals:{categories:0,items:0},processed:{categories:0,items:0},items_failed:0})}}let u=(0,o.l)(a,"default"),d=(0,o.l)(a,"config"),c=new r.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/restaurants/[id]/import-status",pathname:"/api/restaurants/[id]/import-status",bundlePath:"",filename:""},userland:a})},341:(e,t,s)=>{s.d(t,{O:()=>o,p:()=>n});var a=s(2885);let r=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://nthpbtdjhhnwfxqsxbvy.supabase.co",i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im50aHBidGRqaGhud2Z4cXN4YnZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNzM0ODQsImV4cCI6MjA3MDg0OTQ4NH0.CfgwjVvf2DS37QguV20jf7--QZTXf6-DJR_IhFauedA",o=(0,a.createClient)(r,i),n=(0,a.createClient)(r,(process.env.SUPABASE_SERVICE_ROLE_KEY||"placeholder_service_role_key").replace(/\s/g,""))}};var t=require("../../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[4222],()=>__webpack_exec__(9921));module.exports=s})();