"use strict";(()=>{var e={};e.id=611,e.ids=[611],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},1287:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2363:(e,r,t)=>{t.r(r),t.d(r,{config:()=>c,default:()=>u,routeModule:()=>d});var n={};t.r(n),t.d(n,{default:()=>handler});var s=t(1802),a=t(7153),o=t(6249),i=t(341);async function handler(e,r){if("GET"!==e.method)return r.status(405).json({error:"Method not allowed"});try{let{id:t}=e.query;if(!t||"string"!=typeof t)return r.status(400).json({error:"Restaurant ID is required"});console.log("\uD83D\uDD0D Fetching menu for restaurant ID:",t);let{data:n,error:s}=await i.O.from("restaurant_menus").select("*").eq("restaurant_id",t).eq("is_active",!0).single();if(s)return console.error("❌ Error fetching restaurant menu:",s),r.status(404).json({error:"Menu not found"});if(!n)return console.log("⚠️ No active menu found for restaurant"),r.status(200).json({success:!0,menu:[],categories:[],message:"No menu items found"});console.log("✅ Found restaurant menu:",n.name);let{data:a,error:o}=await i.O.from("menu_categories").select("*").eq("menu_id",n.id).order("display_order",{ascending:!0});if(o)return console.error("❌ Error fetching categories:",o),r.status(500).json({error:"Error fetching categories"});console.log(`✅ Found ${a?.length||0} categories`);let u=a?.map(e=>e.id)||[],c=[];if(u.length>0){let{data:e,error:t}=await i.O.from("menu_items").select(`
          *,
          menu_categories (
            name,
            display_order
          )
        `).in("category_id",u).order("display_order",{ascending:!0});if(t)return console.error("❌ Error fetching menu items:",t),r.status(500).json({error:"Error fetching menu items"});c=e||[]}console.log(`✅ Found ${c.length} menu items`);let d=c.map(e=>({id:e.id,name:e.name,description:e.description||"",price:parseFloat(e.price)||0,category:e.menu_categories?.name||"Other",dietary_tags:[],prep_time:15,rating:4.5,is_popular:!1,image_url:e.image_url||null})),l=a?.map(e=>({name:e.name,description:e.description,items_count:c.filter(r=>r.category_id===e.id).length}))||[];return r.status(200).json({success:!0,menu:d,categories:l,restaurant_menu:{id:n.id,name:n.name,description:n.description},stats:{total_items:d.length,total_categories:a?.length||0}})}catch(e){return console.error("❌ API Error:",e),r.status(500).json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"})}}let u=(0,o.l)(n,"default"),c=(0,o.l)(n,"config"),d=new s.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/restaurants/[id]/menu",pathname:"/api/restaurants/[id]/menu",bundlePath:"",filename:""},userland:n})},341:(e,r,t)=>{t.d(r,{O:()=>o});var n=t(2885);let s=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://nthpbtdjhhnwfxqsxbvy.supabase.co",a=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im50aHBidGRqaGhud2Z4cXN4YnZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNzM0ODQsImV4cCI6MjA3MDg0OTQ4NH0.CfgwjVvf2DS37QguV20jf7--QZTXf6-DJR_IhFauedA",o=(0,n.createClient)(s,a);(0,n.createClient)(s,process.env.SUPABASE_SERVICE_ROLE_KEY||"placeholder_service_role_key")}};var r=require("../../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222],()=>__webpack_exec__(2363));module.exports=t})();